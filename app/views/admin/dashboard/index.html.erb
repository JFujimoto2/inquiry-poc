<h1 class="text-2xl font-bold mb-6">Dashboard</h1>

<div class="grid grid-cols-4 gap-4 mb-8">
  <div class="bg-white shadow rounded p-4">
    <div class="text-gray-600 text-sm">Total Inquiries</div>
    <div class="text-2xl font-bold"><%= @stats[:total_inquiries] %></div>
  </div>
  <div class="bg-white shadow rounded p-4">
    <div class="text-gray-600 text-sm">Quotes Sent</div>
    <div class="text-2xl font-bold text-green-600"><%= @stats[:quotes_sent] %></div>
  </div>
  <div class="bg-white shadow rounded p-4">
    <div class="text-gray-600 text-sm">Quotes Pending</div>
    <div class="text-2xl font-bold text-yellow-600"><%= @stats[:quotes_pending] %></div>
  </div>
  <div class="bg-white shadow rounded p-4">
    <div class="text-gray-600 text-sm">Quotes Failed</div>
    <div class="text-2xl font-bold text-red-600"><%= @stats[:quotes_failed] %></div>
  </div>
</div>

<h2 class="text-xl font-semibold mb-4">Recent Inquiries</h2>
<table class="w-full bg-white shadow rounded">
  <thead class="bg-gray-100">
    <tr>
      <th class="text-left p-3">Date</th>
      <th class="text-left p-3">Company</th>
      <th class="text-left p-3">Facility</th>
      <th class="text-left p-3">Amount</th>
      <th class="text-left p-3">Quote Status</th>
    </tr>
  </thead>
  <tbody>
    <% @recent_inquiries.each do |inquiry| %>
      <tr class="border-t">
        <td class="p-3"><%= inquiry.created_at.strftime("%Y-%m-%d %H:%M") %></td>
        <td class="p-3"><%= inquiry.company_name %></td>
        <td class="p-3"><%= inquiry.facility.name %></td>
        <td class="p-3"><%= number_to_currency(inquiry.total_amount, unit: "Â¥", precision: 0) if inquiry.total_amount %></td>
        <td class="p-3">
          <% if inquiry.quote %>
            <span class="px-2 py-1 rounded text-xs font-medium
              <%= case inquiry.quote.status
                  when 'sent' then 'bg-green-100 text-green-800'
                  when 'pending' then 'bg-yellow-100 text-yellow-800'
                  when 'generated' then 'bg-blue-100 text-blue-800'
                  when 'failed' then 'bg-red-100 text-red-800'
                  end %>">
              <%= inquiry.quote.status.capitalize %>
            </span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
