<% content_for :hero do %>
  <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-12 px-4">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-4xl font-bold mb-3">お問い合わせフォーム</h1>
      <p class="text-blue-100 text-lg">ご利用内容をご入力ください。お見積りをメールでお送りいたします。</p>
    </div>
  </div>
<% end %>

<div class="max-w-4xl mx-auto -mt-8">
  <%= form_with(model: @inquiry, class: "space-y-8", data: { controller: "inquiry-form" }) do |form| %>
    <% if @inquiry.errors.any? %>
      <div class="bg-red-50 border border-red-400 text-red-700 px-5 py-4 rounded-lg">
        <p class="font-semibold mb-2">入力内容をご確認ください</p>
        <ul class="list-disc list-inside text-sm space-y-1">
          <% @inquiry.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%# Section 1: 施設・日程 %>
    <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
      <h2 class="text-xl font-bold text-gray-800 mb-6 pl-3 border-l-4 border-blue-600">施設・日程</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="md:col-span-2">
          <%= form.label :facility_id, "施設", class: "block text-sm font-semibold text-gray-700 mb-1" %>
          <%= form.collection_select :facility_id, @facilities, :id, :name,
              { prompt: "施設を選択してください" },
              class: "w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition" %>
        </div>

        <div>
          <%= form.label :desired_date, "利用開始日", class: "block text-sm font-semibold text-gray-700 mb-1" %>
          <%= form.date_field :desired_date,
              class: "w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition",
              data: { action: "change->inquiry-form#validateDateRange", inquiry_form_target: "startDate" } %>
        </div>

        <div>
          <%= form.label :desired_end_date, "利用終了日", class: "block text-sm font-semibold text-gray-700 mb-1" %>
          <%= form.date_field :desired_end_date,
              class: "w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition",
              data: { action: "change->inquiry-form#validateDateRange", inquiry_form_target: "endDate" } %>
          <p class="mt-1 text-xs text-red-600 hidden" data-inquiry-form-target="dateError">利用終了日は利用開始日以降の日付を指定してください</p>
        </div>

        <div>
          <%= form.label :num_people, "利用人数", class: "block text-sm font-semibold text-gray-700 mb-1" %>
          <%= form.number_field :num_people, min: 1,
              class: "w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition" %>
        </div>
      </div>
    </div>

    <%# Section 2: サービス %>
    <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
      <h2 class="text-xl font-bold text-gray-800 mb-6 pl-3 border-l-4 border-blue-600">サービス</h2>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        <label class="relative flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition hover:border-blue-300 has-checked:border-blue-500 has-checked:bg-blue-50">
          <%= form.check_box :conference_room, class: "mr-3 h-5 w-5 accent-blue-600" %>
          <span class="font-medium text-gray-700">会議室</span>
        </label>

        <label class="relative flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition hover:border-blue-300 has-checked:border-blue-500 has-checked:bg-blue-50">
          <%= form.check_box :accommodation, class: "mr-3 h-5 w-5 accent-blue-600",
              data: { action: "change->inquiry-form#toggleBreakfast", inquiry_form_target: "accommodation" } %>
          <span class="font-medium text-gray-700">宿泊</span>
        </label>

        <div data-inquiry-form-target="breakfastWrapper" class="<%= 'hidden' unless @inquiry.accommodation? %>">
          <label class="relative flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition hover:border-blue-300 has-checked:border-blue-500 has-checked:bg-blue-50 h-full">
            <%= form.check_box :breakfast, class: "mr-3 h-5 w-5 accent-blue-600" %>
            <span class="font-medium text-gray-700">朝食</span>
          </label>
        </div>

        <label class="relative flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition hover:border-blue-300 has-checked:border-blue-500 has-checked:bg-blue-50">
          <%= form.check_box :lunch, class: "mr-3 h-5 w-5 accent-blue-600" %>
          <span class="font-medium text-gray-700">昼食</span>
        </label>

        <label class="relative flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer transition hover:border-blue-300 has-checked:border-blue-500 has-checked:bg-blue-50">
          <%= form.check_box :dinner, class: "mr-3 h-5 w-5 accent-blue-600" %>
          <span class="font-medium text-gray-700">夕食</span>
        </label>
      </div>
    </div>

    <%# Section 3: お客様情報 %>
    <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
      <h2 class="text-xl font-bold text-gray-800 mb-6 pl-3 border-l-4 border-blue-600">お客様情報</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="md:col-span-2">
          <%= form.label :company_name, "貴社名", class: "block text-sm font-semibold text-gray-700 mb-1" %>
          <%= form.text_field :company_name,
              class: "w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition",
              placeholder: "例: 株式会社サンプル" %>
        </div>

        <div>
          <%= form.label :contact_name, "ご担当者氏名", class: "block text-sm font-semibold text-gray-700 mb-1" %>
          <%= form.text_field :contact_name,
              class: "w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition",
              placeholder: "例: 山田 太郎" %>
        </div>

        <div>
          <%= form.label :email, "メールアドレス", class: "block text-sm font-semibold text-gray-700 mb-1" %>
          <%= form.email_field :email,
              class: "w-full border border-gray-300 rounded-lg p-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition",
              placeholder: "例: yamada@example.com" %>
        </div>
      </div>
    </div>

    <%# Submit %>
    <div class="text-center">
      <%= form.submit "お問い合わせを送信",
          class: "bg-blue-600 text-white px-10 py-3 rounded-lg text-lg font-semibold hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none transition cursor-pointer shadow-lg" %>
    </div>
  <% end %>
</div>
